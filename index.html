<!-- NOTES
THIS COMPONENT WAS INSPIRED BY & REWORKED FROM 
VANILLA CSS COLLAPSABLE DRAWERS: https://codepen.io/builtbyluke/pen/dBVVQR -->

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<html lang="en">
<meta name="description" content="">
<title>NSS Custom Components</title>
<link rel="stylesheet" href="assets/css/accordion.css">
<link rel="stylesheet" href="assets/css/modal.css">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;700&display=swap" rel="stylesheet">
<script type="text/javascript" href="assets/js/modal.js"></script> 
</head>

<body>
  
  <div class="container">
    
    <h1>Accordion</h1>
    
    <div class="faq-drawer">
      <input class="faq-drawer__trigger" id="faq-drawer" type="checkbox" /><label class="faq-drawer__title" for="faq-drawer">DRAWER ONE </label>
      <div class="faq-drawer__content-wrapper">
        <div class="faq-drawer__content">
          <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. 
          </p>
        </div>
      </div>
    </div>
    
    <div class="faq-drawer">
      <input class="faq-drawer__trigger" id="faq-drawer-2" type="checkbox" /><label class="faq-drawer__title" for="faq-drawer-2">DRAWER TWO</label>
      <div class="faq-drawer__content-wrapper">
        <div class="faq-drawer__content">
          <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. 
          </p>
        </div>
      </div>
    </div>
    
    <div class="faq-drawer">
      <input class="faq-drawer__trigger" id="faq-drawer-3" type="checkbox" /><label class="faq-drawer__title" for="faq-drawer-3">DRAWER THREE</label>
      <div class="faq-drawer__content-wrapper">
        <div class="faq-drawer__content">
          <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.            
          </p>
        </div>
      </div>
    </div>
    
  </div>
  
  <div class="hidden" id="nss-modal">
    <p>this is dummy content</p>
    <a id="close" href="#"><img src="assets/img/close.svg"></a>
  </div>
  
<script>
  
console.log("test");
//this is the function where we store the cookies 
const cookieStorage = {
  getItem: (key) => {
    const cookies = document.cookie
      .split(';')
      .map(cookie => cookie.split('='))
      .reduce((acc, [key, value]) => ({ ...acc, [key.trim()]: value}), {});
    return cookies[key];  
  },
  setItem: (key, value) => {
    document.cookie = `${key}=${value}`
  },
};    

//this sets the cookie stored to be 'viewed'
const storageType = cookieStorage;
const modalPropertyName = 'viewed';

const shouldShowPopup = () => !storageType.getItem(modalPropertyName);
const saveToStorage = () => storageType.setItem(modalPropertyName, true );


//this gets the nss modal and hides it on page load
window.onload = () => {
  const nssModal = document.getElementById('nss-modal');
  const closeBtn = document.getElementById('close'); 
  
  const closeFn = event => {
    saveToStorage(storageType);
    nssModal.classList.add('hidden');
  };
  
  closeBtn.addEventListener('click', closeFn);
  
  
//this shows the modal after 2 seconds  
  if (shouldShowPopup(storageType)) {
    setTimeout(() => {
      nssModal.classList.remove('hidden');
    }, 2000);
  }
}; 

</script>
 
</body>
</html>